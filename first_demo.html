<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8">
<title>First demo</title>
</head>

<body>

<script src="main.js"></script>

<script type="text/javascript">
    var alice, bob, aliceCoin, bobCoin;

    function update(){
        ctx.clearRect(0,0,gc.width,gc.height);
        alice.draw(ctx);
        bob.draw(ctx);
        aliceCoin.move();
        bobCoin.move();
        aliceCoin.draw(ctx);
        bobCoin.draw(ctx);
    }

    window.onload = function(){
        gc=document.getElementById('first_demo');
        ctx = gc.getContext('2d');
        loadImages();

        alice = new Person(images.alice, 0, 0, 1);
        bob = new Person(images.bob, gc.width, 0, -1);
        aliceCoin = new Coin(100);
        bobCoin = new Coin(450);

        aliceCoin.onLand = function(){
            choice = Math.random()>0.5 ? "circle" : "triangle";
            setTimeout(function(){alice.say("circle");}, 500);
            setTimeout(function(){aliceCoin.flip();}, 2500);
        }

        bobCoin.onLand = function(){
            choice = Math.random()>0.5 ? "circle" : "triangle";
            setTimeout(function(){bob.say(choice);}, 500);
            setTimeout(function(){bobCoin.flip();}, 2500);
        }

        aliceCoin.flip();
        bobCoin.flip();
        setInterval(function(){requestAnimationFrame(update);}, 33);
    }
</script>

<canvas id=first_demo width=600 height=100></canvas>

</body>
</html>
