<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8">
<title>Second demo</title>
<link rel="stylesheet" href="css.css">
</head>

<body>

<script src="main.js"></script>

<script type="text/javascript">
    var opposite = {"circle":"triangle", "triangle":"circle"};
    var winlose;
    var wins = 0;

    function executeStrategy(){
        choice = Math.random()>0.5 ? "circle" : "triangle";
        if (aliceCoin.outcome=="tails" && bobCoin.outcome=="tails"){
            alice.say(choice);
            bob.say(opposite[choice]);
        }
        else {
            alice.say(choice);
            bob.say(choice);
        }
        wins += 1;
        winlose.innerHTML = "Won " + wins + " games  / Lost 0 games (100%)" ;

    }

    window.onload = function(){
        boot();

        alice = new Person(images.alice, 0, 50, 1);
        bob = new Person(images.bob, gc.width, 50, -1);
        aliceCoin = new Coin(100, 100);
        bobCoin = new Coin(450, 100);

        rules = new Rules();

        aliceCoin.onLand = function(){
            setTimeout(executeStrategy, 50);
        }

        gc.onclick = function(){
            alice.say(undefined);
            bob.say(undefined);
            aliceCoin.flip();
            bobCoin.flip();
        }

        setInterval(update, 15);
    }

</script>

<canvas id=canvas width=600 height=150></canvas>
<div id=winlose>
<div class="caption">Click anywhere in the figure to play a turn.</div>
</div>

</body>
</html>
